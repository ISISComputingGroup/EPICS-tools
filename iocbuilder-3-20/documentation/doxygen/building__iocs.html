<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>iocbuilder: Brief Guide to Building IOCs using \c iocbuilder</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">iocbuilder Python Module</a>
  </div>
</div>
<div class="contents">
<h2><a class="anchor" id="ref_overview">
Brief Guide to Building IOCs using \c iocbuilder</a></h2>
<p>Creating an IOC with the IOC builder involves the following steps:</p>
<ul>
<li><a class="el" href="building__iocs.html#ref_initialisation">Initialisation and Import</a></li>
<li><a class="el" href="building__iocs.html#ref_support">Loading Support Modules</a></li>
<li><a class="el" href="building__iocs.html#ref_creation">Creating IOC Resources</a></li>
<li><a class="el" href="building__iocs.html#ref_ioc_config">Configuring the Generated IOC</a></li>
<li><a class="el" href="building__iocs.html#ref_writing">Writing the Generated IOC</a></li>
</ul>
<h2><a class="anchor" id="ref_initialisation">
Initialisation and Import</a></h2>
<p>After importing the iocbuilder it must be configured by calling one of the following functions:</p>
<ul>
<li><a class="el" href="namespaceiocbuilder_1_1configure.html#a4ad4f10216844da1d492ea3ed7125d60">ConfigureIOC()</a> <br/>
 This is the normal IOC initialisation function. The default architecture is vxWorks.</li>
<li><a class="el" href="namespaceiocbuilder_1_1configure.html#a56036ae07ab085e78577381e4c97adb2">ConfigureTemplate()</a> <br/>
 This initialisation is appropriate the builder is being used to generate a template.</li>
<li><a class="el" href="namespaceiocbuilder_1_1configure.html#a9cd8e4e819f0d83082bb2e08ea20ea15">ParseEtcArgs()</a> and <a class="el" href="namespaceiocbuilder_1_1configure.html#ac17ba0a3ea70dfb52fa2dfeed0c63879">ParseAndConfigure()</a> <br/>
 This initialisation picks up ioc information from command line arguments, and version information from <code>configure/RELEASE</code> and related files.</li>
<li><a class="el" href="classiocbuilder_1_1configure_1_1Configure.html">Configure(...)</a> <br/>
 All the other calls above delegate to this more general purpose call.</li>
</ul>
<h2><a class="anchor" id="ref_support">
Loading Support Modules</a></h2>
<p>After the builder has been configured the required support modules should be loaded using one of the following three methods:</p>
<ul>
<li><a class="el" href="classiocbuilder_1_1libversion_1_1ModuleVersion.html">ModuleVersion()</a> <br/>
 Calls to this function can be made inline for each support module.</li>
<li><a class="el" href="namespaceiocbuilder_1_1configure.html#a18bb9f2556194265129ae244c17a0d7d">LoadVersionFile()</a> <br/>
 This is useful for packaging module definitions separately.</li>
<li>If <a class="el" href="namespaceiocbuilder_1_1configure.html#ac17ba0a3ea70dfb52fa2dfeed0c63879">ParseAndConfigure()</a> was passed a <code>dependency_tree</code> object then it will do <a class="el" href="classiocbuilder_1_1libversion_1_1ModuleVersion.html">ModuleVersion()</a> calls for each module it finds in <code>configure/RELEASE</code> </li>
</ul>
<p>The builder will look for a Python module called <code>builder</code> in the <code>etc</code> subdirectory of each loaded EPICS support module: this can be a file <code>builder.py</code> or a Python package <code>builder</code>, ie a subdirectory containing a <code><a class="el" href="____init_____8py_source.html">__init__.py</a></code> file.</p>
<h2><a class="anchor" id="ref_creation">
Creating IOC Resources</a></h2>
<p>Each loaded support module will load resources into the IOC builder, but they have to be invoked in order to appear in the generated IOC. Support module resources appear in two places:</p>
<ul>
<li><a class="el" href="namespaceiocbuilder_1_1libversion.html#a04e2ca2e19ca526adbcdf05aaf198954">modules</a> All loaded EPICS support modules are loaded as submodules of this module.</li>
<li><a class="el" href="namespaceiocbuilder.html#ae83bc70b8c19ef0803c9462d2d177f90">hardware</a> Names explicitly exported from EPICS support modules.</li>
</ul>
<p>Each support module provides its own API, accessible through these two names.</p>
<h3><a class="anchor" id="ref_records">
Creating Records</a></h3>
<p>The naming convention for records is enforced by the <code>record_names</code> argument passed to <a class="el" href="classiocbuilder_1_1configure_1_1Configure.html">Configure()</a>, but the default naming convention is <a class="el" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html">DiamondRecordNames</a> which provides the following functions:</p>
<ul>
<li><a class="el" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a1cbe445387b49994f41cc4d030732feb">SetDomain()</a> Sets up the domain and optionally the technical area.</li>
<li><a class="el" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a863e58cd0b6d7a8dfa98937fd4a38a2b">SetTechnicalArea()</a> Can be used to set up technical area separately from domain.</li>
<li><a class="el" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a94a5ae6a6d9a526d504f915c5ff212b1">SetDevice()</a> Completes setting up the device name by specifying device and id.</li>
<li><a class="el" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#aa819788b751d98ecb5becdda2d6869e7">GetDevice()</a> Returns the computed device name.</li>
<li><a class="el" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a2329b0205d524d3bf152b0e3e6048208">UnsetDevice()</a> Clears the device name.</li>
</ul>
<p>When using <a class="el" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html">DiamondRecordNames</a> the device name must first be set up by calling <a class="el" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a1cbe445387b49994f41cc4d030732feb">SetDomain()</a> and <a class="el" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a94a5ae6a6d9a526d504f915c5ff212b1">SetDevice()</a> before any records are created.</p>
<p>Records are then created either by invoking the record factory methods of the <a class="el" href="namespaceiocbuilder_1_1dbd.html#ad4b17e59cbd32e2be9e0490e6f73501d">records</a> class, or by invoking record factory methods of imported support classes. In both cases the resulting records are instances of the <a class="el" href="classiocbuilder_1_1recordbase_1_1Record.html">Record</a> class.</p>
<p>Other related routines:</p>
<ul>
<li><a class="el" href="namespaceiocbuilder_1_1recordbase.html#aa8641af1211783298ac134dc7d116288">PP()</a>, <a class="el" href="namespaceiocbuilder_1_1recordbase.html#ab86debd135661c3809393474da99872b">CP()</a>, <a class="el" href="namespaceiocbuilder_1_1recordbase.html#a17b009e94476464e9e9fe74de56586d5">MS()</a>, <a class="el" href="namespaceiocbuilder_1_1recordbase.html#a864b9b980349820ca1422f8d81ccd7c4">NP()</a> -- used to modify links to records.</li>
<li><a class="el" href="classiocbuilder_1_1recordbase_1_1ImportRecord.html">ImportRecord()</a></li>
<li>Parameter()</li>
</ul>
<p>Helper routines for record creation:</p>
<ul>
<li><a class="el" href="namespaceiocbuilder_1_1fanout.html#abea43e711cf9a16f74e5ad4b748ed2de">create_fanout()</a></li>
<li><a class="el" href="namespaceiocbuilder_1_1fanout.html#a5ab827fa7a1118f8bc75cc10c226c870">create_dfanout()</a></li>
</ul>
<h2><a class="anchor" id="ref_ioc_config">
Configuring the Generated IOC</a></h2>
<p>A number of calls help to configure the generated IOC.</p>
<ul>
<li><a class="el" href="classiocbuilder_1_1iocinit_1_1iocInit.html#aa64906543b7aaaf6db2accd85a969ffd">SetTargetDir()</a></li>
<li><a class="el" href="classiocbuilder_1_1iocinit_1_1iocInit.html#a64b3c8877323aab4e31e85b059291ade">SetEpicsPort()</a></li>
<li><a class="el" href="classiocbuilder_1_1iocinit_1_1iocInit.html#a356ec7e17c7092f321f9008f30e2b387">SetGateway()</a></li>
<li><a class="el" href="classiocbuilder_1_1iocinit_1_1iocInit.html#a6fc60e964b3593813e3e578dbc933b49">SetNtpServer()</a></li>
<li><a class="el" href="classiocbuilder_1_1iocinit_1_1iocInit.html#ac67c506e0256606d0c899382e786b451">SetEpicsLogging()</a></li>
<li><a class="el" href="classiocbuilder_1_1iocinit_1_1iocInit.html#a7b7a94e2bb9894bb1290af6312e6c469">SetClockRate()</a></li>
<li><a class="el" href="classiocbuilder_1_1iocinit_1_1iocInit.html#a537c58235ffccfbde0b24e5206b6f304">EpicsEnvSet()</a></li>
<li><a class="el" href="classiocbuilder_1_1iocinit_1_1iocInit.html#ac81c10a16dfff7eb4037fb65f108ae73">IocCommand()</a></li>
</ul>
<h2><a class="anchor" id="ref_writing">
Writing the Generated IOC</a></h2>
<p>If the <a class="el" href="classiocbuilder_1_1iocwriter_1_1DiamondIocWriter.html">DiamondIocWriter</a> has been used then the builder script should end by invoking one of the following functions:</p>
<ul>
<li><a class="el" href="classiocbuilder_1_1iocwriter_1_1DiamondIocWriter.html#a1f5534781abc51d2ea779fc644013351">WriteNamedIoc</a>.</li>
<li><a class="el" href="classiocbuilder_1_1iocwriter_1_1DiamondIocWriter.html#ad6a32d3b0d601664dd5cf55c501fa578">WriteIoc</a></li>
</ul>
<p>Note that once either of these has been called the builder script cannot do any further work, in particular a builder script is not designed to generate more than one IOC. </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
