<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>iocbuilder: /dls_sw/prod/common/python/iocbuilder/3-20/iocbuilder/recordnames.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>/dls_sw/prod/common/python/iocbuilder/3-20/iocbuilder/recordnames.py</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a><a class="code" href="namespaceiocbuilder_1_1recordnames.html">00001</a> <span class="stringliteral">&#39;&#39;&#39;Support for default record name configurations.&#39;&#39;&#39;</span>
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="keyword">import</span> string
<a name="l00004"></a>00004 
<a name="l00005"></a>00005 __all__ = [
<a name="l00006"></a>00006     <span class="stringliteral">&#39;BasicRecordNames&#39;</span>, <span class="stringliteral">&#39;TemplateRecordNames&#39;</span>, <span class="stringliteral">&#39;DiamondRecordNames&#39;</span>,
<a name="l00007"></a>00007     <span class="stringliteral">&#39;RecordName&#39;</span>]
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <span class="comment"># Base class for record name configuration.</span>
<a name="l00011"></a>00011 <span class="keyword">class </span>RecordNamesBase:
<a name="l00012"></a>00012     <span class="keyword">def </span>RecordName(self, name):
<a name="l00013"></a>00013         <span class="keywordflow">return</span> name
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="comment">## Default record name support: each record is created with precisely the name</span>
<a name="l00017"></a>00017 <span class="comment"># it is given.</span>
<a name="l00018"></a><a class="code" href="classiocbuilder_1_1recordnames_1_1BasicRecordNames.html">00018</a> <span class="keyword">class </span><a class="code" href="classiocbuilder_1_1recordnames_1_1BasicRecordNames.html" title="Default record name support: each record is created with precisely the name it is...">BasicRecordNames</a>(RecordNamesBase):
<a name="l00019"></a>00019 
<a name="l00020"></a>00020     __VersionInfo = { <span class="stringliteral">&#39;3.13&#39;</span> : 29, <span class="stringliteral">&#39;3.14&#39;</span> : 61 }
<a name="l00021"></a>00021 
<a name="l00022"></a>00022     <span class="comment"># The version parameter specifies the EPICS version: this determines</span>
<a name="l00023"></a>00023     <span class="comment"># the maximum name length.</span>
<a name="l00024"></a>00024     <span class="keyword">def </span>__init__(self, version=&#39;3.14&#39;):
<a name="l00025"></a>00025         self.<a class="code" href="classiocbuilder_1_1recordnames_1_1BasicRecordNames.html#a0bc78d3fd3ca28bd5d1e130f7cb4a8b1">maxLength</a> = self.<a class="code" href="classiocbuilder_1_1recordnames_1_1BasicRecordNames.html#ac1dbb77edfd8693415a188c557b2090b">__VersionInfo</a>[version]
<a name="l00026"></a>00026 
<a name="l00027"></a>00027     <span class="keyword">def </span>RecordName(self, name):
<a name="l00028"></a>00028         <span class="keyword">assert</span> 0 &lt; len(name) &lt;= self.<a class="code" href="classiocbuilder_1_1recordnames_1_1BasicRecordNames.html#a0bc78d3fd3ca28bd5d1e130f7cb4a8b1">maxLength</a>, \
<a name="l00029"></a>00029             <span class="stringliteral">&#39;Record name &quot;%s&quot; too long&#39;</span> % name
<a name="l00030"></a>00030         <span class="keywordflow">return</span> name
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="comment">## Simple support for building templates.</span>
<a name="l00034"></a>00034 <span class="comment">#</span>
<a name="l00035"></a>00035 <span class="comment"># Records are named &quot;$(DEVICE):name&quot;.</span>
<a name="l00036"></a><a class="code" href="classiocbuilder_1_1recordnames_1_1TemplateRecordNames.html">00036</a> <span class="keyword">class </span><a class="code" href="classiocbuilder_1_1recordnames_1_1TemplateRecordNames.html" title="Simple support for building templates.">TemplateRecordNames</a>(RecordNamesBase):
<a name="l00037"></a>00037     __all__ = [<span class="stringliteral">&#39;TemplateName&#39;</span>, <span class="stringliteral">&#39;Parameter&#39;</span>]
<a name="l00038"></a>00038 
<a name="l00039"></a>00039     <span class="comment">## A Parameter is used to wrap a template parameter before being assigned to</span>
<a name="l00040"></a>00040     <span class="comment"># a record field.</span>
<a name="l00041"></a><a class="code" href="classiocbuilder_1_1recordnames_1_1TemplateRecordNames_1_1Parameter.html">00041</a>     <span class="keyword">class </span><a class="code" href="classiocbuilder_1_1recordnames_1_1TemplateRecordNames_1_1Parameter.html" title="A Parameter is used to wrap a template parameter before being assigned to a record...">Parameter</a>:
<a name="l00042"></a>00042         __ParameterNames = set()
<a name="l00043"></a>00043 
<a name="l00044"></a>00044         <span class="keyword">def </span>__init__(self, name, description = &#39;&#39;, default = None):
<a name="l00045"></a>00045             <span class="comment"># Ensure names aren&#39;t accidentially removed</span>
<a name="l00046"></a>00046             <span class="keyword">assert</span> name <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code" href="classiocbuilder_1_1recordnames_1_1TemplateRecordNames_1_1Parameter.html#a204466c64a3c1ed517b5a57deb0693a0">__ParameterNames</a>, \
<a name="l00047"></a>00047                 <span class="stringliteral">&#39;Parameter name &quot;%s&quot; already defined&#39;</span> % name
<a name="l00048"></a>00048             self.<a class="code" href="classiocbuilder_1_1recordnames_1_1TemplateRecordNames_1_1Parameter.html#a204466c64a3c1ed517b5a57deb0693a0">__ParameterNames</a>.add(name)
<a name="l00049"></a>00049 
<a name="l00050"></a>00050             self.<a class="code" href="classiocbuilder_1_1recordnames_1_1TemplateRecordNames_1_1Parameter.html#a3701795b39ee56abc6c9db441149e254">__name</a> = name
<a name="l00051"></a>00051             self.<a class="code" href="classiocbuilder_1_1recordnames_1_1TemplateRecordNames_1_1Parameter.html#a75af3ca08525a6fdf9a6a11b6b1ab12f">__default</a> = default
<a name="l00052"></a>00052 
<a name="l00053"></a>00053             <span class="comment"># Add the description as metadata to the current record set</span>
<a name="l00054"></a>00054             <span class="keyword">from</span> recordset <span class="keyword">import</span> RecordSet
<a name="l00055"></a>00055             lines = description.split(<span class="stringliteral">&#39;\n&#39;</span>)
<a name="l00056"></a>00056             RecordSet.AddHeaderLine(<span class="stringliteral">&#39;#%% macro, %s, %s&#39;</span> % (name, lines[0]))
<a name="l00057"></a>00057             <span class="keywordflow">for</span> line <span class="keywordflow">in</span> lines[1:]:
<a name="l00058"></a>00058                 RecordSet.AddHeaderLine(<span class="stringliteral">&#39;#  %s&#39;</span> % line)
<a name="l00059"></a>00059 
<a name="l00060"></a>00060         <span class="keyword">def </span>__str__(self):
<a name="l00061"></a>00061             <span class="keywordflow">if</span> self.<a class="code" href="classiocbuilder_1_1recordnames_1_1TemplateRecordNames_1_1Parameter.html#a75af3ca08525a6fdf9a6a11b6b1ab12f">__default</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l00062"></a>00062                 <span class="keywordflow">return</span> <span class="stringliteral">&#39;$(%s)&#39;</span> % self.<a class="code" href="classiocbuilder_1_1recordnames_1_1TemplateRecordNames_1_1Parameter.html#a3701795b39ee56abc6c9db441149e254">__name</a>
<a name="l00063"></a>00063             <span class="keywordflow">else</span>:
<a name="l00064"></a>00064                 <span class="keywordflow">return</span> <span class="stringliteral">&#39;$(%s=%s)&#39;</span> % (self.<a class="code" href="classiocbuilder_1_1recordnames_1_1TemplateRecordNames_1_1Parameter.html#a3701795b39ee56abc6c9db441149e254">__name</a>, self.<a class="code" href="classiocbuilder_1_1recordnames_1_1TemplateRecordNames_1_1Parameter.html#a75af3ca08525a6fdf9a6a11b6b1ab12f">__default</a>)
<a name="l00065"></a>00065 
<a name="l00066"></a>00066         <span class="keyword">def </span>Validate(self, record, field):
<a name="l00067"></a>00067             <span class="keywordflow">return</span> <span class="keyword">True</span>
<a name="l00068"></a>00068 
<a name="l00069"></a>00069 
<a name="l00070"></a>00070     <span class="keyword">def </span>__init__(self, device=None):
<a name="l00071"></a>00071         <span class="keywordflow">if</span> device <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l00072"></a>00072             device = self.Parameter(<span class="stringliteral">&#39;DEVICE&#39;</span>, <span class="stringliteral">&#39;Device name&#39;</span>)
<a name="l00073"></a>00073         self.__Name = device
<a name="l00074"></a>00074 
<a name="l00075"></a>00075     <span class="keyword">def </span>RecordName(self, name):
<a name="l00076"></a>00076         <span class="keywordflow">return</span> <span class="stringliteral">&#39;%s:%s&#39;</span> % (self.__Name, name)
<a name="l00077"></a>00077 
<a name="l00078"></a>00078     <span class="comment">## Can be used to update the template name.</span>
<a name="l00079"></a>00079     <span class="keyword">def </span>TemplateName(self, name):
<a name="l00080"></a>00080         self.__Name = name
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 <span class="comment">## Support for record names following the Diamond naming convention.</span>
<a name="l00084"></a>00084 <span class="comment"># Record names are of the form</span>
<a name="l00085"></a>00085 <span class="comment"># \code</span>
<a name="l00086"></a>00086 <span class="comment">#     DD[DDD]-TT-CCCCC-NN:RRRRRRRRRR</span>
<a name="l00087"></a>00087 <span class="comment"># \endcode</span>
<a name="l00088"></a>00088 <span class="comment"># where \c DDDDD names a domain within the machine, \c TT names a technical</span>
<a name="l00089"></a>00089 <span class="comment"># area, \c CCCCC names a device (or component), \c NN is a two digit sequence</span>
<a name="l00090"></a>00090 <span class="comment"># number, and \c RRRRRRRRRR is the final part of the record name.</span>
<a name="l00091"></a>00091 <span class="comment">#</span>
<a name="l00092"></a>00092 <span class="comment"># When this naming convention is enabled the domain, technical area,</span>
<a name="l00093"></a>00093 <span class="comment"># device and sequence number (id) are specified before records are</span>
<a name="l00094"></a>00094 <span class="comment"># created using the methods SetDomain, SetTechnicalArea and SetDevice.</span>
<a name="l00095"></a>00095 <span class="comment"># When each record is created only the final part of its name then needs</span>
<a name="l00096"></a>00096 <span class="comment"># to be specified.</span>
<a name="l00097"></a><a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html">00097</a> <span class="keyword">class </span><a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html" title="Support for record names following the Diamond naming convention.">DiamondRecordNames</a>(RecordNamesBase):
<a name="l00098"></a>00098     __all__ = [
<a name="l00099"></a>00099         <span class="stringliteral">&#39;SetDomain&#39;</span>, <span class="stringliteral">&#39;SetTechnicalArea&#39;</span>, <span class="stringliteral">&#39;SetDevice&#39;</span>, <span class="stringliteral">&#39;GetDevice&#39;</span>,
<a name="l00100"></a>00100         <span class="stringliteral">&#39;UnsetDevice&#39;</span>]
<a name="l00101"></a>00101 
<a name="l00102"></a>00102     <span class="comment"># The allowable characters in a record name are defined here: [A-Z0-9_-]</span>
<a name="l00103"></a>00103     ValidRecordNameChars = set(string.ascii_uppercase + string.digits + <span class="stringliteral">&#39;_-&#39;</span>)
<a name="l00104"></a>00104 
<a name="l00105"></a>00105     __VersionInfo = { <span class="stringliteral">&#39;3.13&#39;</span> : (10, 2), <span class="stringliteral">&#39;3.14&#39;</span> : (42, 20) }
<a name="l00106"></a>00106 
<a name="l00107"></a>00107     <span class="comment"># The version parameter identifies the epics version.  This determines</span>
<a name="l00108"></a>00108     <span class="comment"># the maximum name length and other naming conventions.</span>
<a name="l00109"></a>00109     <span class="keyword">def </span>__init__(self, version=&#39;3.14&#39;):
<a name="l00110"></a>00110         self.__MaxNameLength, self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a5719f8432b53f2e67847aa50aacc8d17">__MaxNameComponents</a> = \
<a name="l00111"></a>00111             self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a2b315d8ce6b7196dad0378ab354a11c5">__VersionInfo</a>[version]
<a name="l00112"></a>00112         self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a06e2d27007df299a28203e05ff1a357a">__TechnicalArea</a> = <span class="keywordtype">None</span>
<a name="l00113"></a>00113         self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#acb9b242ce210afaf75ed85eb0d18411a">__Domain</a> = <span class="keywordtype">None</span>
<a name="l00114"></a>00114         self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a812f9c16826bb13387ae7a3aa0d6103a">__Device</a> = <span class="keywordtype">None</span>
<a name="l00115"></a>00115 
<a name="l00116"></a>00116     <span class="comment">## The domain, and optionally the technical area, are set by calling this</span>
<a name="l00117"></a>00117     <span class="comment"># routine.  Both of these must be defined before records can be created.</span>
<a name="l00118"></a>00118     <span class="comment">#</span>
<a name="l00119"></a>00119     <span class="comment"># \param domain</span>
<a name="l00120"></a>00120     <span class="comment">#   The machine domain for records to be created.  Frequently this only</span>
<a name="l00121"></a>00121     <span class="comment">#   needs to be set once, as an IOC will only serve records for one</span>
<a name="l00122"></a>00122     <span class="comment">#   machine domain.</span>
<a name="l00123"></a>00123     <span class="comment"># \param area</span>
<a name="l00124"></a>00124     <span class="comment">#   The technical area used for records being created.  This can be</span>
<a name="l00125"></a>00125     <span class="comment">#   omitted, in which case SetTechnicalArea() must be called.</span>
<a name="l00126"></a><a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a1cbe445387b49994f41cc4d030732feb">00126</a>     <span class="keyword">def </span><a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a1cbe445387b49994f41cc4d030732feb" title="The domain, and optionally the technical area, are set by calling this routine.">SetDomain</a>(self, domain, area=None):
<a name="l00127"></a>00127         <span class="keyword">assert</span> 0 &lt; len(domain) &lt;= 5, <span class="stringliteral">&#39;Invalid domain name %s&#39;</span> % domain
<a name="l00128"></a>00128         <span class="comment"># Set the technical area and domain</span>
<a name="l00129"></a>00129         self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#acb9b242ce210afaf75ed85eb0d18411a">__Domain</a> = domain
<a name="l00130"></a>00130         <span class="keywordflow">if</span> area:
<a name="l00131"></a>00131             self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a863e58cd0b6d7a8dfa98937fd4a38a2b" title="Sets the technical area for record creation.">SetTechnicalArea</a>(area)
<a name="l00132"></a>00132 
<a name="l00133"></a>00133 
<a name="l00134"></a>00134     <span class="comment">## Sets the technical area for record creation.  Only required if</span>
<a name="l00135"></a>00135     <span class="comment"># SetDomain() was called with only one parameter.</span>
<a name="l00136"></a><a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a863e58cd0b6d7a8dfa98937fd4a38a2b">00136</a>     <span class="keyword">def </span><a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a863e58cd0b6d7a8dfa98937fd4a38a2b" title="Sets the technical area for record creation.">SetTechnicalArea</a>(self, area):
<a name="l00137"></a>00137         <span class="keyword">assert</span> len(area) == 2, <span class="stringliteral">&#39;Invalid area name %s&#39;</span> % area
<a name="l00138"></a>00138         self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a06e2d27007df299a28203e05ff1a357a">__TechnicalArea</a> = area
<a name="l00139"></a>00139 
<a name="l00140"></a>00140 
<a name="l00141"></a>00141     <span class="comment">## Sets the component and its id before records are created.</span>
<a name="l00142"></a>00142     <span class="comment"># This function must be called before creating any records.  By default</span>
<a name="l00143"></a>00143     <span class="comment"># it takes just the component and id parameters, but the entire device</span>
<a name="l00144"></a>00144     <span class="comment"># name can be specified if required.</span>
<a name="l00145"></a>00145     <span class="comment">#</span>
<a name="l00146"></a>00146     <span class="comment"># Note that normally SetDomain() should be called first, but domain and</span>
<a name="l00147"></a>00147     <span class="comment"># area can be specified if appropriate.</span>
<a name="l00148"></a>00148     <span class="comment">#</span>
<a name="l00149"></a>00149     <span class="comment"># \param component</span>
<a name="l00150"></a>00150     <span class="comment">#   The component name for records.</span>
<a name="l00151"></a>00151     <span class="comment"># \param id</span>
<a name="l00152"></a>00152     <span class="comment">#   The component identifier number.  Must be a number in the range 1 to</span>
<a name="l00153"></a>00153     <span class="comment">#   99.</span>
<a name="l00154"></a>00154     <span class="comment"># \param domain</span>
<a name="l00155"></a>00155     <span class="comment">#   The domain can be overridden here.</span>
<a name="l00156"></a>00156     <span class="comment"># \param area</span>
<a name="l00157"></a>00157     <span class="comment">#   Similarly the technical area can be overridden.</span>
<a name="l00158"></a><a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a94a5ae6a6d9a526d504f915c5ff212b1">00158</a>     <span class="keyword">def </span><a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a94a5ae6a6d9a526d504f915c5ff212b1" title="Sets the component and its id before records are created.">SetDevice</a>(self, component, id, domain=None, area=None):
<a name="l00159"></a>00159         <span class="keywordflow">if</span> domain <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00160"></a>00160             self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#acb9b242ce210afaf75ed85eb0d18411a">__Domain</a> = domain
<a name="l00161"></a>00161         <span class="keywordflow">if</span> area <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00162"></a>00162             self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a06e2d27007df299a28203e05ff1a357a">__TechnicalArea</a> = area
<a name="l00163"></a>00163         <span class="keyword">assert</span> self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a06e2d27007df299a28203e05ff1a357a">__TechnicalArea</a> != <span class="keywordtype">None</span> <span class="keywordflow">and</span> self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#acb9b242ce210afaf75ed85eb0d18411a">__Domain</a> != <span class="keywordtype">None</span>, \
<a name="l00164"></a>00164             <span class="stringliteral">&#39;Must set domain and area before creating records&#39;</span>
<a name="l00165"></a>00165         <span class="keyword">assert</span> 0 &lt; len(component) &lt;= 5, <span class="stringliteral">&#39;Invalid component name %s&#39;</span> % component
<a name="l00166"></a>00166         <span class="keyword">assert</span> 0 &lt; id  <span class="keywordflow">and</span> id &lt;= 99, <span class="stringliteral">&#39;Invalid id number %d&#39;</span> % id
<a name="l00167"></a>00167         self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a812f9c16826bb13387ae7a3aa0d6103a">__Device</a> = <span class="stringliteral">&#39;%s-%s-%s-%02d&#39;</span> % (
<a name="l00168"></a>00168             self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#acb9b242ce210afaf75ed85eb0d18411a">__Domain</a>, self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a06e2d27007df299a28203e05ff1a357a">__TechnicalArea</a>, component, id)
<a name="l00169"></a>00169 
<a name="l00170"></a>00170 
<a name="l00171"></a>00171     <span class="comment">## Returns the currently set device name.</span>
<a name="l00172"></a><a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#aa819788b751d98ecb5becdda2d6869e7">00172</a>     <span class="keyword">def </span><a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#aa819788b751d98ecb5becdda2d6869e7" title="Returns the currently set device name.">GetDevice</a>(self):
<a name="l00173"></a>00173         <span class="keywordflow">if</span> self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a812f9c16826bb13387ae7a3aa0d6103a">__Device</a>:
<a name="l00174"></a>00174             <span class="keywordflow">return</span> self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a812f9c16826bb13387ae7a3aa0d6103a">__Device</a>
<a name="l00175"></a>00175         <span class="keywordflow">else</span>:
<a name="l00176"></a>00176             <span class="keywordflow">raise</span> AttributeError(<span class="stringliteral">&#39;Device not currently defined&#39;</span>)
<a name="l00177"></a>00177 
<a name="l00178"></a>00178 
<a name="l00179"></a>00179     <span class="comment">## This should be called after creating a block of records to ensure that</span>
<a name="l00180"></a>00180     <span class="comment"># the device name isn&#39;t incorrectly reused.&#39;  SetDevice() must be called</span>
<a name="l00181"></a>00181     <span class="comment"># again before further records are created.</span>
<a name="l00182"></a><a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a2329b0205d524d3bf152b0e3e6048208">00182</a>     <span class="keyword">def </span><a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a2329b0205d524d3bf152b0e3e6048208" title="This should be called after creating a block of records to ensure that the device...">UnsetDevice</a>(self):
<a name="l00183"></a>00183         self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a812f9c16826bb13387ae7a3aa0d6103a">__Device</a> = <span class="keywordtype">None</span>
<a name="l00184"></a>00184 
<a name="l00185"></a>00185 
<a name="l00186"></a>00186 
<a name="l00187"></a>00187     <span class="comment"># Computes a record name.  Under version 3.13 rules a valid record name</span>
<a name="l00188"></a>00188     <span class="comment"># is no more than 10 characters and consists of one or two components</span>
<a name="l00189"></a>00189     <span class="comment"># separated by a &#39;:&#39; where each component can only contain upper case</span>
<a name="l00190"></a>00190     <span class="comment"># letters, digits or underscores.  The rules for 3.14 allow for longer</span>
<a name="l00191"></a>00191     <span class="comment"># names with more components.</span>
<a name="l00192"></a>00192     <span class="keyword">def </span>RecordName(self, record, device=None):
<a name="l00193"></a>00193         <span class="keywordflow">if</span> <span class="keywordflow">not</span> device:  device = self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a812f9c16826bb13387ae7a3aa0d6103a">__Device</a>
<a name="l00194"></a>00194         <span class="keyword">assert</span> 0 &lt; len(record) &lt;= self.__MaxNameLength, \
<a name="l00195"></a>00195                <span class="stringliteral">&#39;Record name &quot;%s&quot; too long&#39;</span> % record
<a name="l00196"></a>00196         <span class="comment"># Validate the record name components</span>
<a name="l00197"></a>00197         componentList = record.split(<span class="stringliteral">&#39;:&#39;</span>)
<a name="l00198"></a>00198         <span class="keyword">assert</span> len(componentList) &lt;= self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#a5719f8432b53f2e67847aa50aacc8d17">__MaxNameComponents</a>, \
<a name="l00199"></a>00199                <span class="stringliteral">&#39;No more than two device components allowed in name &quot;%s&quot;&#39;</span> \
<a name="l00200"></a>00200                % record
<a name="l00201"></a>00201         <span class="keywordflow">for</span> component <span class="keywordflow">in</span> componentList:
<a name="l00202"></a>00202             <span class="keyword">assert</span> len(component) &gt; 0, \
<a name="l00203"></a>00203                    <span class="stringliteral">&#39;Empty component in name &quot;%s&quot; not allowed&#39;</span> % record
<a name="l00204"></a>00204             <span class="keyword">assert</span> set(component) &lt;= self.<a class="code" href="classiocbuilder_1_1recordnames_1_1DiamondRecordNames.html#aa8217164f1a614be7c07bf6c8ec08a72">ValidRecordNameChars</a>, \
<a name="l00205"></a>00205                    <span class="stringliteral">&#39;Invalid character(s) in record name &quot;%s&quot;&#39;</span> % record
<a name="l00206"></a>00206 
<a name="l00207"></a>00207         <span class="keyword">assert</span> device <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>, <span class="stringliteral">&#39;Must define device name first&#39;</span>
<a name="l00208"></a>00208         <span class="keywordflow">return</span> <span class="stringliteral">&#39;%s:%s&#39;</span> % (device, record)
<a name="l00209"></a>00209 
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 
<a name="l00212"></a>00212 <span class="comment"># By default we use an instance of RecordNamesBase for record names, but this</span>
<a name="l00213"></a>00213 <span class="comment"># can be rebound during configuration.</span>
<a name="l00214"></a>00214 RecordNames = RecordNamesBase()
<a name="l00215"></a>00215 <span class="keyword">def </span>RecordName(*args, **kargs):
<a name="l00216"></a>00216     <span class="keywordflow">return</span> RecordNames.RecordName(*args, **kargs)
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
